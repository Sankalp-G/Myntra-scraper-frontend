(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2142,4354,1957,3219,1698,9537],{64354:function(e,t,n){"use strict";n.r(t),n.d(t,{UploadStarterAnimation:function(){return S},default:function(){return I}});var o,r=n(55312),i=n(89303),a=n(24642),l=n.n(a),s=n(26766),c=n(46717),d=n(29901),u=n(24161),p=n(389),f=n(20016),m=n(99897),x=n(47381),v=n(10571),h=n(61250),w=function(e){var t=e.children,n=e.className,o=e.show,r=e.style,i=(0,d.useRef)(null),a=(0,d.useState)(),l=a[0],s=a[1],c=(0,d.useMemo)((function(){return new MutationObserver((function(){null!=i&&i.current&&s(null==i?void 0:i.current.getBoundingClientRect())}))}),[i]),u=(0,d.useMemo)((function(){return{top:null==l?void 0:l.top,left:null==l?void 0:l.left,width:null==l?void 0:l.width,height:null==l?void 0:l.height}}),[l]),p=function(){var e;s(null==i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect())};return(0,d.useEffect)((function(){return null!=i&&i.current&&(c.observe(document.body,{subtree:!0,childList:!0,attributes:!0}),window.addEventListener("resize",p)),function(){c.disconnect(),window.removeEventListener("resize",p)}}),[i,c]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:n,style:r,ref:i,children:t}),o&&(null==i?void 0:i.current)&&v.createPortal((0,h.jsxs)("div",{className:"fixed z-[100] inset-0 bg-transparent w-full h-full",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-black opacity-70"}),(0,h.jsx)("div",{className:"absolute",style:u,children:t})]}),document.body)]})};!function(e){e.ANIKIHAMSTER="aniki-hamster",e.LOTTIELEGO="lottie-lego",e.POLITECHICKY="polite-chicky"}(o||(o={}));var j=n(99729),g=n(97806),b=n(98326),y=n(48612),k=n(15354),C=n(48319),N=(0,c.zo)("div",{background:"#019D91",display:"flex",maxWidth:"162px",maxHeight:"162px",aspectRatio:"1/1",width:"100%",justifyContent:"center",alignItems:"center",marginBottom:"8px",cursor:"pointer","&:hover":{background:"#00C1A2"},variants:{variant:{primary:{background:"#00C1A2","&:hover":{background:"#019D91"}},secondary:{background:"transparent",border:"1px solid #BFC8D1","&:hover":{background:"transparent",border:"1px solid #20272C"}}}},defaultVariants:{variant:"primary"}}),E=(0,c.zo)("div",{background:"#ffffff",display:"flex",maxWidth:"162px",maxHeight:"162px",aspectRatio:"1/1",width:"100%",justifyContent:"center",alignItems:"center",marginBottom:"8px",cursor:"pointer",boxShadow:"0px 8px 48px 0px rgba(243, 246, 248, 0.15), 0px 2px 6px 0px rgba(61, 72, 83, 0.06), 0px 0px 1px 0px rgba(61, 72, 83, 0.36);","&:hover":{boxShadow:"0px 8px 48px 0px rgba(243, 246, 248, 0.15), 0px 4px 12px 0px rgba(61, 72, 83, 0.12), 0px 0px 1px 0px rgba(61, 72, 83, 0.36);"}}),S=function(e){var t=e.projectId,n=(0,g.X)(),a=(0,u.useSetRecoilState)(C._b),c=(0,p.Db)(y.H4),v=(0,i.Z)(c,2)[1],S=(0,d.useState)(!1),I=S[0],L=S[1],A=(0,b.cF)(),R=A.activeWorkspace,O=A.activeWorkspaceId,_=(0,j.a)().user,D=(0,u.useRecoilState)(k.rn),F=(0,i.Z)(D,2),P=F[0],T=F[1],M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(0,s.Z9)(new s.Rd("button",e,t))},U=(0,d.useCallback)((function(){M("starter animation highlight do later","dashboard-project-empty-state"),T(!1)}),[T]),W=(0,d.useCallback)(function(){var e=(0,r.Z)(l().mark((function e(n){var o,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(),I){e.next=16;break}return L(!0),e.prev=3,o={workspaceId:O,file:n,projectId:t},e.next=7,v({input:o});case 7:if(!(r=e.sent).error){e.next=10;break}throw new Error(r.error.message);case 10:r.data&&(window.location.href="/animation/".concat(r.data.initialAnimationUpload)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),L(!1);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),[O,I,t,v,U]),Z=(0,d.useCallback)((function(){U(),M("create-animation-cta","dashboard-project-empty-state"),window.open("".concat("https://creator.lottiefiles.com","/new?workspace=").concat(null==R?void 0:R.id),"_blank")}),[R,U]);return(0,h.jsx)(w,{show:P,children:(0,h.jsxs)("div",{className:"relative w-full px-6 py-8 rounded-lg",style:{background:"#EAEFF2"},children:[P&&(0,h.jsx)("div",{className:"absolute bottom-[-30px] left-0 right-0 flex justify-center items-center",children:(0,h.jsx)("span",{className:"text-xs text-gray-200 cursor-pointer",onClick:U,children:"I'll do this later"})}),(0,h.jsxs)("div",{className:"flex flex-col w-full overflow-x-auto",children:[(null==_?void 0:_.name)&&(0,h.jsxs)("h1",{className:"text-lg text-center text-gray-900 font-lf-bold",children:["Hi ",_.name," ðŸ‘‹"]}),(0,h.jsxs)("h1",{className:"mb-8 text-lg text-center text-gray-900 font-lf-bold",children:[!n&&"Get started by uploading or opening an animation",n&&"Get started by creating, uploading or opening an animation"]}),(0,h.jsxs)("div",{className:"relative flex mx-auto space-x-3 text-center",children:[I&&(0,h.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-lg opacity-50 bg-gray-50",children:(0,h.jsx)(x.a,{type:"spinner"})}),n&&(0,h.jsxs)("div",{className:"flex flex-col items-center px-2 lg:px-0 text-center max-w-[162px] w-full",children:[(0,h.jsx)(N,{className:"rounded-lg transition",onClick:Z,children:(0,h.jsx)(m.J,{name:"plus",color:"text-white",large:!0})}),(0,h.jsx)("div",{className:"text-sm text-gray-900 font-lf-bold",children:"Create animation"}),(0,h.jsx)("div",{className:"text-xs text-gray-400",children:"with Lottie Creator"})]}),(0,h.jsxs)("div",{className:"flex flex-col items-center px-2 lg:px-0 text-center max-w-[162px] w-full",children:[(0,h.jsx)(N,{className:"rounded-lg w-full",onClick:function(){a(!0),U(),M("open upload modal","dashboard-project-empty-state")},children:(0,h.jsx)(m.J,{name:"upload",color:"text-white",large:!0})}),(0,h.jsx)("div",{className:"text-sm text-gray-900 font-lf-bold",children:"Upload an animation"}),(0,h.jsx)("div",{className:"text-xs text-gray-400",children:"Lottie JSON / dotLottie"})]}),(0,h.jsxs)("div",{className:"text-center w-full",children:[(0,h.jsx)(E,{className:"rounded-lg ",onClick:function(){W(o.LOTTIELEGO),M("upload lottie lego","dashboard-project-empty-state")},children:(0,h.jsx)(f.J,{src:"/lotties/sample-animations/lottie-lego.json",hover:!0})}),(0,h.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Lottie lego"})]}),(0,h.jsxs)("div",{className:"text-center w-full",children:[(0,h.jsx)(E,{className:"rounded-lg",onClick:function(){W(o.POLITECHICKY),M("upload polite chicky","dashboard-project-empty-state")},children:(0,h.jsx)(f.J,{src:"/lotties/sample-animations/polite-chicky.json",hover:!0})}),(0,h.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Polite chicky"})]}),(0,h.jsxs)("div",{className:"text-center w-full",children:[(0,h.jsx)(E,{className:"rounded-lg",onClick:function(){W(o.ANIKIHAMSTER),M("upload aniki hamster","dashboard-project-empty-state")},children:(0,h.jsx)(f.J,{src:"/lotties/sample-animations/aniki-hamster.json",hover:!0})}),(0,h.jsx)("div",{className:"text-sm text-center text-gray-900",children:"Aniki hamster"})]})]})]})]})})},I=S},77492:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var o=n(29901),r=n(24161),i=n(47642),a=n(47381),l=n(61250),s=o.forwardRef((function(e,t){var n=e.children,o=e.contentWrapperCssClasses,s=void 0===o?"flex-grow overflow-hidden":o,c=e.headerControl,d=e.headerWrapperCssClasses,u=void 0===d?"bg-white h-16 flex items-center px-6 border-b border-gray-100 flex-shrink-0":d,p=e.id,f=(0,r.useRecoilValue)(i.qx);return(0,l.jsxs)("div",{id:p,ref:t,"data-onboarding-watch":"create_menu_new_button",className:"absolute inset-0 flex flex-col w-full overflow-y-auto",children:[c&&(0,l.jsx)("div",{className:u,children:c}),f?(0,l.jsx)(a.a,{size:"lg"}):(0,l.jsx)("div",{className:s,children:n})]})}));s.displayName="PageScaffold"},59069:function(e,t,n){"use strict";n.d(t,{H:function(){return v}});var o=n(26766),r=n(83849),i=n.n(r),a=n(29901),l=n(24161),s=n(47642),c=n(48319),d=n(97623),u=n(99897),p=n(20016),f=n(61250),m="https://creator.lottiefiles.com",x=function(e){var t=e.description,n=e.icon,o=e.title;return(0,f.jsxs)("div",{className:"flex gap-x-2",children:[(0,f.jsx)("div",{children:(0,f.jsx)(u.J,{name:n,className:"text-teal-300"})}),(0,f.jsxs)("div",{className:"flex flex-col text-sm",children:[(0,f.jsx)("div",{className:"font-lf-bold text-gray-900",children:o}),(0,f.jsx)("div",{className:"text-gray-600 tracking-tight",children:t})]})]})},v=function(e){var t=e.canCreateAnimations,n=void 0!==t&&t,r=e.canCreateFolder,v=void 0!==r&&r,h=e.canUpload,w=void 0!==h&&h,j=e.description,g=e.layout,b=void 0===g?"vertical":g,y=e.projectId,k=e.title,C=e.view,N=void 0===C?"dashboard":C,E=e.workspaceId,S=(0,l.useSetRecoilState)(c._b),I=(0,l.useSetRecoilState)(s.rU),L=(0,a.useCallback)((function(){(0,o.Z9)(new o.Rd("button","create-animation-cta","draft-empty-state"));var e="workspace=".concat(E);y&&(e+="&project=".concat(y)),window.open("".concat(m,"/new?").concat(e),"_blank")}),[y,E]),A=300;return"creator"===N?(0,f.jsxs)("div",{className:"flex flex-col text-gray-900 max-w-[600px]",children:[(0,f.jsx)("div",{className:"text-2xl font-lf-bold",children:k}),(0,f.jsx)("div",{className:"max-w-sm text-sm md:text-center",children:j}),(0,f.jsx)("div",{className:"mt-4",children:(0,f.jsx)("iframe",{className:"w-full bg-transparent h-[338px]",src:"https://player.vimeo.com/video/908974038?title=0&byline=0&autoplay=1&autopause=0&app_id=122963",allow:"autoplay; fullscreen; picture-in-picture",title:"Lottie Creator: A powerful web-based Lottie creation tool","data-ready":"true"})}),(0,f.jsxs)("div",{className:"flex flex-col mt-6 gap-y-4",children:[(0,f.jsx)(x,{icon:"animate",title:"Smooth and sleek animations",description:"Have precise control over your animations by adjusting keyframes and creating seamless transitions."}),(0,f.jsx)(x,{icon:"segment-mockup",title:"Import assets to your canvas",description:"Import 7 million+ Lottie animations, illustrations and icons from our library, or insert your own SVGs."}),(0,f.jsx)(x,{icon:"lottie-thick",title:"Integrated with our ecosystem",description:"Enjoy tight integration with the LottieFiles ecosystem to convert to a variety of file formats."})]}),(0,f.jsx)("div",{className:"mt-6 w-full flex justify-center items-center",children:(0,f.jsx)(d.z,{onClick:L,additionalClass:"h-8 w-44 rounded-xl h-10",fontClasses:"font-lf-bold text-sm",icon:"plus",children:"Create animation"})})]}):(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:i()({"flex items-center justify-center":!0,"flex-col":"vertical"===b,"flex-row":"horizontal"===b}),children:["dashboard"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-dashboard.json",style:{width:"".concat(A,"px")}}),"empty-project"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-project.json",style:{width:"".concat(A,"px")}}),"empty-shared-with-me"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-pour-bottle.json",style:{width:"".concat(A,"px")}}),"empty-project-folders"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-3-mugs.json",style:{width:"".concat(A,"px")}}),"no-results"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/search.json",style:{width:"".concat(A,"px")}}),"empty-collection"===N&&(0,f.jsx)(p.J,{autoplay:!0,loop:!0,src:"/lotties/empty-collection.json",style:{width:"".concat(A,"px")}}),(0,f.jsxs)("div",{className:i()({"flex flex-col text-gray-900":!0,"mt-6 items-center space-y-2":"vertical"===b,"ml-8":"horizontal"===b}),children:[(0,f.jsx)("div",{className:"text-2xl font-lf-bold",children:k}),(0,f.jsx)("div",{className:"max-w-sm text-sm md:text-center",children:j}),w&&(0,f.jsx)("div",{children:(0,f.jsxs)("button",{type:"button",onClick:function(){return S(!0)},className:"inline-flex items-center h-8 px-3 py-0 mt-4 space-x-1 text-sm leading-8 lf-btn primary font-lf-regular",children:[(0,f.jsx)(u.J,{name:"plus"}),(0,f.jsx)("span",{children:"Upload animations"})]})}),v&&(0,f.jsx)("div",{children:(0,f.jsx)("button",{type:"button",onClick:function(){return I(!0)},className:"inline-flex items-center h-8 px-3 py-0 mt-4 space-x-1 text-sm leading-8 lf-btn primary font-lf-regular",children:(0,f.jsx)("span",{children:"Create Folder"})})}),n&&(0,f.jsx)("div",{children:(0,f.jsx)("a",{className:"inline-flex items-center h-10 px-4 py-0 mt-4 space-x-1 text-base leading-5 align-middle lf-btn primary",href:m,target:"_blank",rel:"noreferrer",children:"Create an animation"})})]})]})})}},21138:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var o=n(29901),r=n(75545),i=function(e){var t=e.scopes,n=(0,o.useCallback)((function(){return Boolean(null==t?void 0:t.includes(r.l.DOWNLOAD))}),[t]);return{hasUpdateAccess:(0,o.useCallback)((function(){return Boolean(null==t?void 0:t.includes(r.l.FULL_ACCESS))}),[t]),hasDownloadAccess:n}}},12562:function(e,t,n){"use strict";var o=n(29901);t.Z=function(e){var t=e.onPress,n=e.onRelease,r=e.dependencies,i=void 0===r?[]:r,a=e.takesPrecedence;(0,o.useEffect)((function(){var e=function(e){var n=document.activeElement;n&&n.isContentEditable||n&&"button"===n.tagName.toLowerCase()&&!a||"Shift"===e.key&&(e.preventDefault(),t())},o=function(e){var t=document.activeElement;t&&t.isContentEditable||t&&"button"===t.tagName.toLowerCase()&&!a||"Shift"===e.key&&(e.preventDefault(),n())};return window.addEventListener("keydown",e),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",e),window.removeEventListener("keydown",o)}}),i)}},1498:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var o=n(69452),r=n(89303),i=n(55312),a=n(24642),l=n.n(a),s=n(59715),c=n(26766),d=n(62295),u=n(53341),p=n(88406),f=n(26929),m=n(29901),x=n(24161),v=n(389),h=n(64354),w=n(78010),j=n(77492),g=n(59069),b=n(37576),y=n(99729),k=n(25044),C=n(21138),N=n(96240),E=n(12562),S=n(11957),I=n(98326),L=n(94459),A=n(89012),R=n(58773),O=n(81147),_=n(47642),D=n(48319),F=n(84258),P=n(80303),T=n(34916),M=n(30337),U=n(13485),W=n(90170),Z=n(61250),J=(0,p.default)((0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.e(9019).then(n.bind(n,49019)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[49019]},modules:["project/[id].tsx -> @/components/features/download/select-zip-variation-modal-with-feature-service"]}}),V=(0,p.default)((0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(2928),n.e(7896),n.e(9421),n.e(7773),n.e(7310)]).then(n.bind(n,10876)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[10876]},modules:["project/[id].tsx -> @/components/ui/headers/project-header"]}}),G=(0,p.default)((0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(2762),n.e(5452),n.e(5595),n.e(661)]).then(n.bind(n,52979)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[52979]},modules:["project/[id].tsx -> @/components/ui/selection-bar"]}}),H=(0,p.default)((0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(467),n.e(6042),n.e(8518),n.e(7846)]).then(n.bind(n,97846)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[97846]},modules:["project/[id].tsx -> @/components/ui/views/grid-view"]}}),B=(0,p.default)((0,i.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(7255),n.e(467),n.e(7767),n.e(2762),n.e(9421),n.e(4284),n.e(5452),n.e(6540),n.e(4765),n.e(2430),n.e(6217),n.e(2676)]).then(n.bind(n,51172)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[51172]},modules:["project/[id].tsx -> @/components/ui/views/list-view"]}});function z(){var e,t,n,a,p,z,q,Y,Q,K,X,$,ee,te=(0,u.useRouter)(),ne=(0,y.a)().user,oe=te.query,re=oe.from,ie=oe.id,ae=oe.sort,le=oe.status,se=oe.type,ce=(0,b.p)(),de=(0,x.useSetRecoilState)(_.qx),ue=(0,m.useState)(!1),pe=ue[0],fe=ue[1],me=(0,x.useSetRecoilState)(D.QJ),xe=(0,m.useState)([]),ve=xe[0],he=xe[1],we=(0,x.useSetRecoilState)(A.Y),je=ve.length>0,ge=(0,m.useState)(!1),be=ge[0],ye=ge[1],ke=(0,m.useState)(null),Ce=ke[0],Ne=ke[1],Ee=(0,m.useState)(!1),Se=Ee[0],Ie=Ee[1],Le=(0,x.useRecoilValue)(F.Ol),Ae=(0,x.useRecoilValue)(R.cd),Re=(0,s.SS)(d.AD.FILE_UPLOAD_LIMIT),Oe=(0,m.useState)(null),_e=Oe[0],De=Oe[1],Fe=(0,m.useState)(!1),Pe=Fe[0],Te=Fe[1],Me=(0,m.useState)(null),Ue=Me[0],We=Me[1],Ze=(0,m.useState)(null),Je=Ze[0],Ve=Ze[1],Ge=(0,m.useState)(!1),He=Ge[0],Be=Ge[1];(0,E.Z)({onPress:function(){Te(!0)},onRelease:function(){Te(!1)}});var ze=(0,v.m8)(),qe=(0,v.aM)({query:L.ig,variables:{id:ie,orderBy:ae||JSON.stringify({isFolder:"DESC",updatedAt:"DESC"}),status:le,type:se,first:24},pause:!ie}),Ye=(0,r.Z)(qe,1)[0],Qe=(0,I.hp)(null===(e=Ye.data)||void 0===e||null===(t=e.project)||void 0===t?void 0:t.workspaceId),Ke=(0,m.useMemo)((function(){return(0,U.fK)(Qe)}),[Qe]),Xe=(0,m.useState)(null),$e=Xe[0],et=Xe[1],tt=(0,m.useState)(!1),nt=tt[0],ot=tt[1],rt=Re.on&&Ke===P.Q.FREE,it=null===(n=Ye.data)||void 0===n||null===(a=n.projectFiles)||void 0===a?void 0:a.edges.map((function(e){return e.node}));(0,m.useEffect)((function(){Ye.fetching?de(!0):(de(!1),Ye.error?(0,M.w)(Ye.error):Ye.data&&Ye.data.projectFiles&&Ye.data.project&&(Ye.data.project.isSystem||me({name:Ye.data.project.title,isPrivate:Boolean(Ye.data.project.isPrivate),projectTitle:Ye.data.project.title,type:"project",workspaceId:Ye.data.project.workspaceId,projectId:Ye.data.project.id}),(0,c.Z9)(new c.RG({projectId:Ye.data.project.id,projectName:Ye.data.project.title,workspaceId:Ye.data.project.workspaceId,url:window.location.href})),de(!1),ye(Ye.data.projectFiles.pageInfo.hasNextPage),Ne(Ye.data.projectFiles.pageInfo.endCursor)))}),[Ye,te,de,me]);var at=(0,m.useCallback)((function(e){We(W.RT.LOADED);var t=ve,n=t.map((function(e){return e.id})).indexOf(e);if(it){var r=it.find((function(t){return t.id===e}));if(!r)return;var i=it.indexOf(r);if(Pe)if(null===_e)t.push(r);else{var a=(0,W.Jm)(_e,i,it);n>-1?(0,W.wh)(t,a):(0,W.AW)(t,a)}else n>-1?t.splice(n,1):t.push(r);De(i)}0===t.length&&We(null),he((0,o.Z)(t)),we(t.length)}),[ve,it,we,_e,Pe]),lt=(0,m.useCallback)((function(){We(null),we(0),he([]),De(null),Be(!1)}),[we]),st=(0,m.useCallback)((function(){Le||Ae?null==ce||ce.pushError(w.Vv):(et(null),Ie(!0))}),[Le,Ae,ce]),ct=(0,m.useCallback)((function(){Le||Ae?null==ce||ce.pushError(w.Vv):(ot(!0),Ie(!0))}),[Le,Ae,ce]),dt=(0,m.useCallback)((function(){Ie(!1),et(null),ot(!1)}),[]),ut=(0,m.useCallback)((function(e,t){Le||Ae?null==ce||ce.pushError(w.Vv):(ot(!1),et({id:e,name:t}),Ie(!0))}),[Le,Ae,ce]),pt=(0,m.useMemo)((function(){return $e?1:nt||Ue===W.RT.EVERYTHING?(null===(e=Ye.data)||void 0===e?void 0:e.projectFiles.totalCount)||0:ve.length;var e}),[$e,Ue,ve,nt,Ye]),ft=(0,N.t)(),mt=(0,m.useCallback)(function(){var e=(0,i.Z)(l().mark((function e(t){var n,o,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e?[{id:$e.id,type:"FOLDER"}]:nt||Ue===W.RT.EVERYTHING?[{id:ie,type:"PROJECT"}]:ve.map((function(e){return{id:e.id,type:(0,T.qR)(e)?"FOLDER":"FILE"}})),ot(!1),et(null),Ie(!1),lt(),e.next=7,ft({entries:r,numberOfEntries:pt,projectId:ie,projectName:null===(n=Ye.data)||void 0===n||null===(o=n.project)||void 0===o?void 0:o.title,folderId:null==$e?void 0:$e.id,folderName:null==$e?void 0:$e.name,variant:t});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[$e,null===(p=Ye.data)||void 0===p||null===(z=p.project)||void 0===z?void 0:z.title,ie,ve,Ue,lt,ft,pt,nt]),xt=(0,k._)("project-view","grid"),vt=(0,r.Z)(xt,2),ht=vt[0],wt=vt[1],jt=(0,m.useCallback)((function(){wt("grid"===ht?"list":"grid"),(0,c.Z9)(new c.rR({projectId:ie,userId:null==ne?void 0:ne.id,view:"grid"===ht?"list":"grid"}))}),[ht,wt,ie,ne]),gt=(0,x.useRecoilValue)(O.h),bt=(0,m.useCallback)((function(){lt(),null==ce||ce.pushSuccess("".concat(ve.length>1?"Assets were":"Asset was"," successfully transferred to ").concat(null==gt?void 0:gt.name,"."))}),[lt,ve.length,null==gt?void 0:gt.name,ce]),yt=(0,m.useCallback)((function(e){var t,n,r=ve,i=null===(t=Ye.data)||void 0===t||null===(n=t.projectFiles)||void 0===n?void 0:n.edges.map((function(e){return e.node}));e?((0,W.AW)(r,i||[]),we(r.length),We(W.RT.LOADED),Be(!0)):((0,W.wh)(r,i||[]),we(r.length),We(null),Be(!1)),he((0,o.Z)(r))}),[null===(q=Ye.data)||void 0===q||null===(Y=q.projectFiles)||void 0===Y?void 0:Y.edges,ve,we]),kt=(0,m.useCallback)((0,i.Z)(l().mark((function e(){var t,n,o,r,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]&&i[0],it&&0!==(null==it?void 0:it.length)){e.next=3;break}return e.abrupt("return");case 3:return o=n&&Ye.data?(null===(t=Ye.data)||void 0===t?void 0:t.projectFiles.totalCount)-(null==it?void 0:it.length):24,r=rt?Math.min(12,Math.abs(Re.value-(null==it?void 0:it.length))):o,e.prev=5,fe(!0),e.next=9,ze.query(L.f3,{id:ie,status:le,type:se,orderBy:ae||JSON.stringify({isFolder:"DESC",updatedAt:"DESC"}),after:Ce,first:r}).toPromise();case 9:return e.prev=9,fe(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[5,,9,12]])}))),[it,Ye.data,rt,Re.value,ze,ie,le,se,ae,Ce]),Ct=(0,m.useCallback)((function(){Ye.data&&!Ye.fetching&&!pe&&be&&Ce&&kt()}),[Ce,kt,Ye.data,Ye.fetching,be,pe]);(0,m.useEffect)((function(){lt()}),[te.asPath,lt]);var Nt="https://creator.lottiefiles.com",Et=(0,m.useCallback)((function(e,t){var n,o,r="shared-with-me"===re;(((0,T.QR)(e)||(0,T.xK)(e))&&(n=e.fileObject.filename.split(".").pop()),"creator"===n)?window.open("".concat(Nt,"?fileId=").concat(e.id,"&utm_medium=platform&utm_source=file-card"),"_blank"):(o=(0,T.qR)(e)?"/folder/".concat(e.id):"/animation/".concat(e.id),ae&&(o+="?sort=".concat(encodeURIComponent(ae.toString()))),r&&(o+="".concat(ae?"&":"?","from=shared-with-me")),t?window.open(o,"_blank"):te.push(o))}),[re,Nt,ae,te]),St=(null===(Q=Ye.data)||void 0===Q?void 0:Q.project)||null,It=(0,m.useCallback)((0,i.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!it){e.next=6;break}return e.next=3,ze.query(L.A0,{id:ie}).toPromise();case 3:(t=e.sent).data&&Ve(t.data.project.stats),he((0,o.Z)(it));case 6:We(W.RT.EVERYTHING);case 7:case"end":return e.stop()}}),e)}))),[ze,ie,it]),Lt=ve.length&&(null==it?void 0:it.some((function(e){return-1===ve.findIndex((function(t){return t.id===e.id}))})))||!1,At=(0,C.O)({scopes:(null==St?void 0:St.projectPermissionScopes)||[]}),Rt=At.hasDownloadAccess,Ot=At.hasUpdateAccess,_t=(0,m.useMemo)((function(){return"folders"!==se&&(null==St?void 0:St.isSystem)&&"Drafts"===(null==St?void 0:St.title)}),[St,se]),Dt=(0,m.useMemo)((function(){return _t&&(!it||it.length<=0)}),[_t,it]),Ft=(0,m.useState)(!1),Pt=Ft[0],Tt=Ft[1];return(0,m.useEffect)((function(){_t&&null!=ne&&ne.id&&!Pt&&((0,c.Z9)(new c.di({userId:ne.id})),Tt(!0))}),[_t,null==ne?void 0:ne.id,Pt]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(f.default,{children:(0,Z.jsx)("title",{children:"LottieFiles Platform"})}),(0,Z.jsxs)(S.s,{features:null==St?void 0:St.features,children:[(0,Z.jsx)(j.o,{headerWrapperCssClasses:"flex items-center px-6 flex-shrink-0 pt-6 pb-4",contentWrapperCssClasses:"flex-grow p-6 pt-0",headerControl:!Dt&&(0,Z.jsx)(V,{selectedCount:ve.length,loadedCount:(null==it?void 0:it.length)||0,showFilters:0!==(null==it?void 0:it.length)||(Boolean(le)||Boolean(se)),totalCount:(null===(K=Ye.data)||void 0===K?void 0:K.projectFiles.totalCount)||0,onSelectAll:yt,selectionIsIndeterminate:Lt,isSelectionMode:je,toggleProjectView:jt,projectView:ht,project:St,fromSharedWithMe:"shared-with-me"===re,selectionType:Ue,onSelectEverything:It,clearSelection:lt,showSelectionBanner:He,onDownloadAllClick:ct,showSelectAll:Rt()||Ot()}),children:(0,Z.jsx)("div",{className:"h-full space-y-3",children:St&&(0,Z.jsxs)(Z.Fragment,{children:[it&&it.length>0?(0,Z.jsx)("div",{className:"space-y-4",children:"list"===ht?(0,Z.jsx)(B,{id:"project-list",files:it,selectionMode:je,onSelectionChange:at,selectedAnimations:ve,selectable:!0,canLoadMore:be,onLoadMore:Ct,isLoadingMore:pe,onFolderDownloadAllClick:ut,onItemClick:Et,workspaceId:St.workspaceId}):(0,Z.jsx)(H,{files:it,selectionMode:je,onSelectionChange:at,selectedAnimations:ve,selectable:!0,onLoadMore:Ct,canLoadMore:be,isLoadingMore:pe,showAddToCollection:!0,onFolderDownloadAllClick:ut,onItemClick:Et,workspaceId:St.workspaceId})}):(0,Z.jsxs)(Z.Fragment,{children:[!le&&"folders"===se&&(0,Z.jsx)(g.H,{title:"Create folders for your animations",description:"Sort your animations into folders to stay organized.",view:"empty-project-folders",canCreateFolder:!0}),!le&&"folders"!==se&&!St.isSystem&&(null===(X=St.projectPermissionScopes)||void 0===X?void 0:X.includes("full_access"))&&(0,Z.jsx)("div",{className:"pt-2",children:(0,Z.jsx)(h.default,{projectId:St.id})}),!le&&"folders"!==se&&!St.isSystem&&!(null!==($=St.projectPermissionScopes)&&void 0!==$&&$.includes("full_access"))&&(0,Z.jsx)(g.H,{title:"Animation added will appear here",description:"You can only view this project. Ask for full access to add animations.",view:"empty-project"}),!le&&_t&&(0,Z.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,Z.jsx)(g.H,{title:"Create beautiful animations with Lottie Creator, our light yet powerful web-based tool",view:"creator",projectId:St.id,workspaceId:St.workspaceId,canCreateAnimations:!0})}),le&&(0,Z.jsx)(g.H,{title:"No result found",description:"We couldn't find any item based on your filter.",view:"no-results"})]}),je?(0,Z.jsx)(G,{canDelete:Ot(),canDownload:Rt(),canMove:Ot(),canUpdateStatus:Ot(),canAddToCollection:Ot(),type:"project",resourceId:St.id,workspaceId:St.workspace.id,selectedAnimations:ve,isPrivate:St.isPrivate,clear:lt,onDownload:st,onTransferComplete:bt,totalCount:(null===(ee=Ye.data)||void 0===ee?void 0:ee.projectFiles.totalCount)||0,contentStats:Je,isEverythingSelected:Ue===W.RT.EVERYTHING}):null]})})}),Se&&(0,Z.jsx)(J,{show:Se,numberOfEntries:pt,onClose:dt,onSelect:mt,workspaceId:null==St?void 0:St.workspaceId})]})]})}},11957:function(e,t,n){"use strict";n.d(t,{s:function(){return l},w:function(){return s}});var o=n(62295),r=n(29901),i=n(61250),a=r.createContext({features:[]}),l=function(e){var t=e.children,n=e.features;return(0,i.jsx)(a.Provider,{value:{features:n},children:t})},s=function(){var e=r.useContext(a).features;return e?new o.UZ(e):new o.UZ([])}},89012:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var o=(0,n(24161).atom)({key:"selectedAnimationsCount",default:0})},85446:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var o=n(24161),r=(0,o.atom)({key:"transferSelectionAtom",default:null});(0,o.atom)({key:"createNewFolder",default:!1})},81147:function(e,t,n){"use strict";n.d(t,{h:function(){return o.h}});var o=n(85446)},34916:function(e,t,n){"use strict";var o,r,i,a,l,s,c;n.d(t,{GN:function(){return o},Nn:function(){return r},hF:function(){return i},eL:function(){return a},nT:function(){return s},ws:function(){return c},QR:function(){return p},xK:function(){return f},qR:function(){return m},yx:function(){return d}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(o||(o={})),function(e){e.Loop="Loop",e.PlayOnce="PlayOnce"}(r||(r={})),function(e){e.DotLottie="lottie",e.Gif="gif",e.LottieJson="json",e.Mp4="mp4"}(i||(i={})),function(e){e.GIF="gif",e.MOV="mov",e.MP4="mp4",e.WEBM="webm"}(a||(a={})),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(l||(l={})),function(e){e.Approved="Approved",e.InProgress="InProgress",e.NeedsReview="NeedsReview",e.Shipped="Shipped"}(s||(s={})),function(e){e.Completed="Completed",e.Failed="Failed",e.InProgress="InProgress",e.Pending="Pending"}(c||(c={}));var d,u=function(e){return e.split(".").pop()};function p(e){if(!e.fileObject)return!1;var t=e.fileObject.filename,n=u(t);return void 0!==n&&["lottie","json"].includes(n)}function f(e){if(!e.fileObject)return!1;var t=e.fileObject.filename,n=u(t);return void 0!==n&&"creator"===n}function m(e){return e&&"Folder"===e.__typename}!function(e){e.COLOR_PALETTE="color-palette",e.DIRECT="Direct",e.PREMIUM_ANIMTIONS="premium-animations",e.URL="URL"}(d||(d={}))},75545:function(e,t,n){"use strict";var o;function r(e){return"object"==typeof e&&null!==e&&"folders"in e}n.d(t,{l:function(){return o},k:function(){return r}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.VIEW="view"}(o||(o={}))},30337:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var o=n(31380),r={"Access denied!":function(e){var t,n,r,i,a,l=null!==(t=null==e||null===(n=e.extensions)||void 0===n?void 0:n.code)&&void 0!==t?t:"",s=null!==(r=null==e||null===(i=e.extensions)||void 0===i||null===(a=i.exception)||void 0===a?void 0:a.stacktrace)&&void 0!==r?r:[];throw console.log("Error code:",l),console.log("Stacktrace:",s),new o.J},"Database query failed":function(e){var t,n,r,i,a,l=null!==(t=null==e||null===(n=e.extensions)||void 0===n?void 0:n.code)&&void 0!==t?t:"",s=null!==(r=null==e||null===(i=e.extensions)||void 0===i||null===(a=i.exception)||void 0===a?void 0:a.stacktrace)&&void 0!==r?r:[];throw console.log("Error code:",l),console.log("Stacktrace:",s),new o.J},Forbidden:function(e){var t,n,r,i,a,l=null!==(t=null==e||null===(n=e.extensions)||void 0===n?void 0:n.code)&&void 0!==t?t:"",s=null!==(r=null==e||null===(i=e.extensions)||void 0===i||null===(a=i.exception)||void 0===a?void 0:a.stacktrace)&&void 0!==r?r:[];throw console.log("Error code:",l),console.log("Stacktrace:",s),new o.J}};function i(e){e.networkError?console.error("Network error:",e.networkError):e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.forEach((function(e){var t,n=e.message,o=Object.keys(r).find((function(e){return n.includes(e)}));o?null===(t=r[o])||void 0===t||t.call(r,e):console.error("GraphQL error:",e)})):console.error("Unknown error:",e)}},90170:function(e,t,n){"use strict";var o;function r(e,t,n){var o=Math.min(e,t),r=Math.max(e+1,t+1);return n.splice(o,r-o)}function i(e,t){t.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));n>-1&&e.splice(n,1)}))}function a(e,t){t.forEach((function(t){-1===e.findIndex((function(e){return e.id===t.id}))&&e.push(t)}))}n.d(t,{RT:function(){return o},Jm:function(){return r},wh:function(){return i},AW:function(){return a}}),function(e){e.EVERYTHING="everything",e.LOADED="loaded"}(o||(o={}))},60787:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[id]",function(){return n(1498)}])}},function(e){e.O(0,[9774,2888,179],(function(){return t=60787,e(e.s=t);var t}));var t=e.O();_N_E=t}]);